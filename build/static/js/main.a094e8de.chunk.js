(this.webpackJsonpicwReact=this.webpackJsonpicwReact||[]).push([[0],{33:function(e,t,n){e.exports=n(55)},38:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),o=n(20),c=n.n(o),a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=n(13),l=n(14),m=n(17),d=n(15),p=n(22),I=n(16),f=(n(38),n(3)),h=n(2),E="http://localhost:8000/api/v1",g="REQUEST_TESTS",b="RECEIVE_TESTS";function y(){return{type:g}}function v(e){return function(e){e(y),fetch("".concat(E,"/tests")).then((function(e){return e.json()})).then((function(t){e(function(e){return{type:b,tests:e,receivedAt:Date.now()}}(t))}))}}var C="SET_ARCHITECTURE_LEVEL",S="SET_SEARCH";function O(e){return{type:C,architectureLevel:e}}function w(e){return{type:S,search:e}}var j="REQUEST_SIGNUP",A="RECEIVE_SIGNUP";function T(){return{type:j}}function k(e,t){return function(n){n(T),fetch("".concat(E,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){return n(function(e){return{type:A,message:e.message,session:e.session}}(e))})).catch((function(e){alert("Invalid email/password, email may already be in use"),console.error(e)}))}}var N="LOGIN",_="RECEIVE_LOGIN";function R(e,t){return function(n){n({type:N}),fetch("".concat(E,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){n(function(e){return{type:_,message:e.message,session:e.session,completedCourseItems:e.completedCourseItems,assignedCourseItems:e.assignedCourseItems}}(e)),"teacher"===e.session.role&&n(ue())})).catch((function(e){return alert("Invalid email/password")}))}}var L="REQUEST_LOGOUT",x="RECEIVE_LOGOUT";function P(e,t){return function(n){n({type:L}),fetch("".concat(E,"/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,userId:t})}).then((function(e){return e.json()})).then((function(e){return n({type:x})})).catch((function(e){return alert(e)}))}}var D="RECEIVE_REFRESH_SESSION",U="REQUEST_COURSES",B="RECEIVE_COURSES",M="RECEIVE_COURSE_ITEMS",q="REQUEST_ADD_COURSE",F="RECEIVE_ADD_COURSE",W="REQUEST_ADD_COURSE_ITEM",z="RECEIVE_COURSE_ITEM",Q="REQUEST_EDIT_COURSE_ITEM",V="RECEIVE_EDIT_COURSE_ITEM",J="REQUEST_ADD_SUB_COURSE_ITEM",H="RECEIVE_ADD_SUB_COURSE_ITEM";function G(){return{type:J}}function K(){return{type:H}}function X(){return function(e,t){var n=t().session,r="sessionId=".concat(n.sessionId,"; userId=").concat(n.userId,";");e({type:U}),fetch("".concat(E,"/courses"),{headers:{Session:r}}).then((function(e){return e.json()})).then((function(t){e(function(e){return{type:B,items:e}}(t)),e(function(e){return{type:M,courses:e}}(t))})).catch((function(e){return alert("Error: Could not fetch courses. "+e)}))}}function Y(e){return function(t,n){var r=n().session,s="sessionId=".concat(r.sessionId,"; userId=").concat(r.userId,";");t(function(e){return{type:q,courseName:e}}(e)),fetch("".concat(E,"/courses"),{method:"POST",headers:{"Content-Type":"application/json",Session:s},body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){t({type:F}),t(X())})).catch((function(t){return alert("Error: Could not add course '".concat(e,"'. Are you logged in with a 'teacher' user? ").concat(t))}))}}function $(e,t){return function(n,r){var s=r().session,o="sessionId=".concat(s.sessionId,"; userId=").concat(s.userId,";");n(function(e){return{type:W,courseId:e}}(t)),fetch("".concat(E,"/courses/").concat(t),{method:"POST",headers:{"Content-Type":"application/json",Session:o},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){n(function(e){return{type:z,courseItem:e}}(e)),n(X())})).catch((function(e){return alert("Error: Could not add item to course with id '".concat(t,"'. Are you logged in with a 'teacher' user? ").concat(e))}))}}function Z(e,t,n,r){return function(s,o){var c=o().session,a="sessionId=".concat(c.sessionId,"; userId=").concat(c.userId,";");s({type:Q}),fetch("".concat(E,"/courses/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Session:a},body:JSON.stringify({courseItemId:t,type:n,content:r})}).then((function(e){return e.json()})).then((function(e){s({type:V}),s(X())})).catch((function(e){return alert("Error: Could not edit course item with id '".concat(t,"'. Are you logged in with a 'teacher' user?"))}))}}var ee="REQUEST_USERS",te="RECEIVE_USERS",ne="REQUEST_COMPLETE_COURSE_ITEM",re="RECEIVE_COMPLETE_COURSE_ITEM",se="REQUEST_ASSIGN_COURSE_ITEM",oe="RECEIVE_ASSIGN_COURSE_ITEM",ce="REQUEST_CHANGE_USER_ROLE",ae="RECEIVE_CHANGE_USER_ROLE";function ie(e,t){return{type:ae,userId:e,role:t}}function ue(){return function(e,t){var n=t().session,r="sessionId=".concat(n.sessionId,"; userId=").concat(n.userId,";");e({type:ee}),fetch("".concat(E,"/users"),{headers:{Session:r}}).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:te,users:e}}(t))})).catch((function(e){return alert("Error: Could not fetch users. ".concat(e))}))}}function le(e,t){return function(n,r){var s=r().session,o="sessionId=".concat(s.sessionId,"; userId=").concat(s.userId,";");n(function(e){return{type:ne,courseItemId:e}}(e)),fetch("".concat(E,"/users/completedCourseItems"),{method:"POST",headers:{"Content-Type":"application/json",Session:o},body:JSON.stringify({courseItemId:e,grade:t})}).then((function(e){return e.json()})).then((function(r){return n(function(e,t,n,r){return{type:re,userId:n,completedCourseItem:{courseItemId:t,completedAt:e.completedAt,grade:r}}}(r,e,s.userId,t))})).catch((function(t){return alert("Error: Could not complete course item with id '".concat(e,". ").concat(t,"'"))}))}}function me(e,t){return function(n,r){var s=r().session,o="sessionId=".concat(s.sessionId,"; userId=").concat(s.userId,";");n(function(e){return{type:se,courseItemId:e}}(e)),fetch("".concat(E,"/users/assignedCourseItems"),{method:"POST",headers:{"Content-Type":"application/json",Session:o},body:JSON.stringify({courseItemId:e,userId:t})}).then((function(e){return e.json()})).then((function(r){return n(function(e,t,n){return{type:oe,userId:n,assignedCourseItem:{courseItemId:t,assignedAt:e.assignedAt}}}(r,e,t))})).catch((function(t){return alert("Error: Could not complete course item with id '".concat(e,". ").concat(t,"'"))}))}}function de(e,t){return function(n,r){var s=r().session,o="sessionId=".concat(s.sessionId,"; userId=").concat(s.userId,";");n(function(e,t){return{type:ce,userId:e,role:t}}(e,t)),fetch("".concat(E,"/users/role"),{method:"PATCH",headers:{"Content-Type":"application/json",Session:o},body:JSON.stringify({userId:e,role:t})}).then((function(e){return e.json()})).then((function(e){n(ie),n(ue())})).catch((function(n){return alert("Error: Could not change user role to '".concat(t,"' for user with id '").concat(e,". ").concat(n,"'"))}))}}var pe="ADD_PROBLEM",Ie="REMOVE_PROBLEM",fe="EDIT_PROBLEM_QUESTION",he="ADD_PROBLEM_OPTION",Ee="REMOVE_PROBLEM_OPTION",ge="RECEIVE_PROBLEMS",be="EDIT_PROBLEM_CORRECT_OPTION_INDEX";var ye=Object(f.b)((function(e){return{tests:e.entities.tests.allIds.map((function(t){return e.entities.tests.byId[t]}))}}),(function(e){return{fetchTestsClick:function(){return e(v())}}}))((function(e){var t=e.tests,n=e.fetchTestsClick;return s.a.createElement("div",{className:"Test"},s.a.createElement("h3",null,"Test Component/Container"),s.a.createElement("ul",{style:{listStyle:"none"}},t.map((function(e,t){return s.a.createElement("li",{key:t}," ",e.message," ")}))),s.a.createElement("button",{onClick:function(){return n()}}," Fetch Tests "))})),ve=(n(43),Object(f.b)((function(){return{}}),(function(e){return{fetchLoginSubmit:function(t,n){return e(R(t,n))},fetchSignupSubmit:function(t,n){return e(k(t,n))}}}))((function(e){var t=e.fetchLoginSubmit,n=e.fetchSignupSubmit,r=(e.currentForm,e.location);return s.a.createElement("div",{className:"Login"},s.a.createElement("img",{className:"mb-4 center-block",src:"/images/icw-logo-200x100.png",alt:"I/T CS Workshop"}),(!r||!r.hash||"#signup"!==r.hash)&&s.a.createElement("form",{className:"form-signin text-center",onSubmit:function(e){e.preventDefault();var n=e.target.email.value.trim(),r=e.target.password.value.trim();n&&r?(t(n,r),e.target.email.value="",e.target.password.value=""):alert("A valid email & password are required")}},s.a.createElement("h3",{className:"h3 mb-3 text-center font-weight-normal"},"Please Sign In"),s.a.createElement("label",{htmlFor:"inputEmail",className:"sr-only"},"Email address"),s.a.createElement("input",{name:"email",type:"text",id:"inputEmail",className:"form-control",placeholder:"Email address",autoFocus:!0}),s.a.createElement("label",{htmlFor:"inputPassword",className:"sr-only"},"Password"),s.a.createElement("input",{name:"password",type:"password",id:"inputPassword",className:"form-control",placeholder:"Password"}),s.a.createElement("div",{className:"checkbox mb-3"},s.a.createElement("label",{htmlFor:"remember-me"},s.a.createElement("input",{type:"checkbox",value:"remember-me",id:"remember-me"})," Remember me")),s.a.createElement("button",{className:"mb-3 btn btn-lg btn-success btn-block",type:"submit"},"Sign in"),"New to ICW? ",s.a.createElement("a",{href:"#signup",className:"font-weight-normal"},"Register now.")),s.a.createElement("hr",null),r&&r.hash&&"#signup"===r.hash&&s.a.createElement("form",{className:"form-signin text-center",onSubmit:function(e){e.preventDefault();var t=e.target.email.value.trim(),r=e.target.password.value.trim();t&&r?(n(t,r),e.target.email.value="",e.target.password.value=""):alert("A valid email & password are required")}},s.a.createElement("h3",{className:"h3 mb-3 text-center font-weight-normal"},"Sign up"),s.a.createElement("label",{htmlFor:"inputEmail",className:"sr-only"},"Email address"),s.a.createElement("input",{name:"email",type:"text",id:"inputEmail",className:"form-control",placeholder:"Email address",autoFocus:!0}),s.a.createElement("label",{htmlFor:"inputPassword",className:"sr-only"},"Password"),s.a.createElement("input",{name:"password",type:"password",id:"inputPassword",className:"form-control",placeholder:"Password"}),s.a.createElement("button",{className:"mb-3 btn btn-lg btn-success btn-block",type:"submit"},"Sign Up"),"Already have an account? ",s.a.createElement("a",{href:"",className:"font-weight-normal"},"Login.")))}))),Ce=(n(44),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.session.expiresAt&&this.props.session.expiresAt>Date.now()&&this.props.fetchCourses()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"Sidebar"},s.a.createElement(h.c,{to:"/"},s.a.createElement("img",{src:"/images/icw-logo-128x90.png",alt:"ICW logo"})),s.a.createElement("h4",null,this.props.courseId&&""!==this.props.courseId?"":"Projects"),this.props.children,"teacher"===this.props.session.role&&s.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=t.target.newCourse.value;e.props.fetchAddCourseSubmit(n),t.target.newCourse.value=""}},s.a.createElement("input",{name:"newCourse",type:"text",placeholder:"New Project...",minLength:"4",maxLength:"24"}),s.a.createElement("button",{type:"submit"},"Add")))}}]),t}(s.a.Component)),Se=Object(f.b)((function(e,t){return{session:e.session,courseId:t.courseId}}),(function(e){return{fetchAddCourseSubmit:function(t){return e(Y(t))},fetchCourses:function(){return e(X())}}}))(Ce),Oe=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window&&window.CKEDITOR&&(window.CKEDITOR.replace("editor1"),window.CKEDITOR.config.mathJaxLib="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML",window.CKEDITOR.config.allowedContent=!0,window.CKEDITOR.config.removeFormatAttributes="",this.props.editingContent&&window.CKEDITOR.instances.editor1.setData(this.props.editingContent))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"CKEditor"},s.a.createElement("textarea",{name:"editor1",id:"editor1"}),s.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=t.target.title.value,r=window.CKEDITOR.instances.editor1.getData();e.props.editingContent||e.props.isAddingSubCourseItem?e.props.isAddingSubCourseItem?e.props.fetchAddSubCourseItemClick(e.props.type,n,r):e.props.fetchEditCourseItemClick(e.props.type,r):e.props.fetchAddCourseItemClick({type:"lesson",title:n,content:r}),window.CKEDITOR.instances.editor1.setData(""),t.target.title&&(t.target.title.value="")}},s.a.createElement("br",null),!this.props.editingContent&&s.a.createElement("input",{name:"title",minLength:"1",placeholder:"Lesson Title..."}),s.a.createElement("button",{type:"submit"},"Submit Lesson")),s.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.popupLinkText.value,n=e.target.popupDisplayText.value;window.CKEDITOR.instances.editor1.insertHtml("<p style='text-decoration:underline; cursor: pointer;' class='customPopup' onclick=\"alert('".concat(n,"')\">").concat(t,"</p>")),e.target.popupLinkText.value="",e.target.popupDisplayText.value=""}},s.a.createElement("input",{name:"popupLinkText",type:"text",placeholder:"Text for popup link..."}),s.a.createElement("input",{name:"popupDisplayText",type:"text",placeholder:"Text displayed in the popup..."}),s.a.createElement("button",{type:"submit"},"Add popup")))}}]),t}(s.a.Component);n(52);var we=Object(f.b)((function(e,t){return{problems:e.entities.problems.allIds.filter((function(e){return e.substring(1,e.length)===t.courseItemId})).map((function(t){return e.entities.problems.byId[t]})),courseItemId:t.courseItemId}}),(function(e,t){return{addProblemClick:function(t){return e(function(e){return{type:pe,problem:e}}(t))},editProblemQuestionBlur:function(t,n){return e(function(e,t){return{type:fe,problemId:e,question:t}}(t,n))},addProblemOptionBlur:function(t,n){""!==n&&e(function(e,t){return{type:he,problemId:e,option:t}}(t,n))},editProblemCorrectOptionIndexClick:function(t,n){return e(function(e,t){return{type:be,problemId:e,correctOptionIndex:t}}(t,n))},fetchAddCourseItemSubmit:function(e){return t.fetchAddCourseItemClick(e)}}}))((function(e){var t=e.problems,n=e.courseItemId,r=e.addProblemClick,o=e.editProblemQuestionBlur,c=e.addProblemOptionBlur,a=e.editProblemCorrectOptionIndexClick,i=e.fetchAddCourseItemSubmit;return s.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={title:e.target.quizTitle.value,type:"quiz",content:"This is a quiz.",problems:t};!function(e){if(console.log("quiz:",e),e.title.length<1)return!1;for(var t in e.problems)if(e.problems[t].question.length<1||e.problems[t].options.length<2||!e.problems[t].correctOptionIndex&&0!==e.problems[t].correctOptionIndex||e.problems[t].correctOptionIndex>=e.problems[t].options.length)return!1;return!0}(n)?alert("Invalid quiz. A quiz requires a title and at least one problem. Each problem require a valid question, at least 2 options, and a correct answer."):(i(n),e.target.quizTitle.value="")}},s.a.createElement("h3",null,"QuizEditor"),s.a.createElement("hr",null),t.map((function(e,t){return s.a.createElement("fieldset",{className:"problem",key:e.id},s.a.createElement("legend",null,"Problem ",t+1),s.a.createElement("h5",null,e.question),s.a.createElement("ul",{className:"problemOptions"},e.options.map((function(t,n){return s.a.createElement("li",{key:n,style:{color:e.correctOptionIndex===n?"green":"red"},onClick:function(){return a(e.id,n)}},t)}))),s.a.createElement("input",{type:"text",placeholder:"Question...",defaultValue:e.question,onBlur:function(t){return o(e.id,t.target.value)}}),s.a.createElement("input",{key:t,type:"text",placeholder:"Option...",defaultValue:e.options[e.options.length-1],onBlur:function(t){c(e.id,t.target.value),t.target.value=""}}))})),s.a.createElement("button",{type:"button",onClick:function(){return r({id:"".concat(t.length).concat(n),question:"",options:[],correctOptionIndex:null})}},"Add problem"),t.length>0&&s.a.createElement("section",null,s.a.createElement("input",{name:"quizTitle",type:"text",placeholder:"Quiz Title..."}),s.a.createElement("button",{type:"submit"},"Submit Quiz")))})),je=function(){var e;function t(){console.log("Inside handleFileChosen");var t=document.getElementById("fileInput").files[0];console.log("File name: %s",t.name),(e=new FileReader).onload=function(e){if(console.log("Inside readContent"),e){var t=e.split(/[\r\n\t]+/);console.log("Number of lines in file: %d",t.length);var n=!0,r=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var a=o.value;console.log("New Line: %s",a)}}catch(i){r=!0,s=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}}else console.log("content is NULL")}(e.result),e.readAsText(t)}return s.a.createElement("div",{className:"SRSImport"},s.a.createElement("hr",null),s.a.createElement("h3",null,"Import From SRS"),s.a.createElement("form",{method:"POST",enctype:"multipart/form-data",onSubmit:function(e){console.log("Inside onSubmit"),t()}},s.a.createElement("input",{id:"fileInput",name:"fileInput",type:"file",accept:".srsnote"}),s.a.createElement("input",{type:"submit"})),s.a.createElement("hr",null))},Ae=Object(f.b)((function(e,t){return{courseId:t.courseId,course:e.entities.courses.byId[t.courseId],courseItems:e.entities.courseItems.allIds.map((function(t){return e.entities.courseItems.byId[t]})).filter((function(e){return e.courseId===t.courseId})),sessionRole:e.session.role||!1,children:t.children}}),(function(e,t){return{fetchAddCourseItemClick:function(n){return e($(n,t.courseId))}}}))((function(e){e.courseId,e.courseItems;var t=e.fetchAddCourseItemClick,n=e.course,r=void 0===n?{name:"Course Name"}:n,o=e.sessionRole,c=e.children;return s.a.createElement("div",{className:"Course",style:{padding:"15px"}},s.a.createElement("h2",null," ",r.name," "),c," ","teacher"===o&&s.a.createElement("section",{className:"courseItemEditors"},s.a.createElement(Oe,{fetchAddCourseItemClick:t}),s.a.createElement(je,{fetchAddCourseItemClick:t}),s.a.createElement(we,{fetchAddCourseItemClick:t,courseItemId:""})))})),Te=(n(53),Object(f.b)((function(e){return{architectureLevel:e.ui.architectureLevel}}),(function(e){return{setArchitectureLevelClick:function(t){return e(O(t))}}}))((function(e){var t=e.architectureLevel,n=e.setArchitectureLevelClick;return s.a.createElement("nav",{className:"Navbar"},s.a.createElement("ul",{className:"architectureLevels"},s.a.createElement("li",{className:"WorkShop"===t?"activeArchitectureLevel":"inactiveArchitectureLevel",onClick:function(){return n("WorkShop")}},s.a.createElement(h.b,{style:{textDecoration:"none"},to:"/"},"WorkShop")),s.a.createElement("li",{className:"WorkBench"===t?"activeArchitectureLevel":"blueHover",onClick:function(){return n("WorkBench")}}," WorkBench "),s.a.createElement("li",{className:"TestBench"===t?"activeArchitectureLevel":"inactiveArchitectureLevel",onClick:function(){return n("TestBench")}},s.a.createElement(h.b,{style:{textDecoration:"none"},to:"/"},"TestBench"))),s.a.createElement("select",{defaultValue:"Mentor",onChange:function(e){return console.log("tba popup mentor courseItem",e.target.value)}},s.a.createElement("option",null,"Mentor"),s.a.createElement("option",null,"Option 1"),s.a.createElement("option",null,"Option 2"),s.a.createElement("option",null,"Option 3")))}))),ke=n(5),Ne=n(4);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Object(ke.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case U:case q:return!0;case B:case F:return!1;default:return e}}function xe(e,t){var n=e.find((function(e){return e.id===t}));return n?n.title:""}var Pe=Object(Ne.c)({isFetching:Le,byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return function(e){var t={};for(var n in e)for(var r in e[n].items)t[e[n].items[r].id]=Re({courseId:e[n]._id},e[n].items[r]);return t}(t.courses);default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return function(e){var t=[];for(var n in e)for(var r in e[n].items)t.push(e[n].items[r].id);return t}(t.courses);default:return e}}}),De=Object(Ne.c)({isFetching:Le,byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"0ab":{_id:"0ab",name:"Offline Course 1"},"1ab":{_id:"1ab",name:"Offline Course 2"},"2ab":{_id:"2ab",name:"Offline Course 3"}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:var n={};for(var r in t.items)n[t.items[r]._id]={_id:t.items[r]._id,name:t.items[r].name};return n;default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["0ab","1ab","2ab"],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return t.items.map((function(e){return e._id}));default:return e}}}),Ue=n(9);function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(n,!0).forEach((function(t){Object(ke.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t){return e.filter((function(e){return e.type===t})).map((function(e){return e.id}))}function Fe(e){return e>=.8?"green":e>=.7?"#424242":e>=.5?"#EF5350":"red"}var We=Object(Ne.c)({isFetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case ee:return!0;case te:return!1;default:return e}},byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var e=localStorage.getItem("userId"),t=JSON.parse(localStorage.getItem("completedCourseItems"))||[],n=JSON.parse(localStorage.getItem("assignedCourseItems"))||[];return e?Object(ke.a)({},e,{completedCourseItems:t,assignedCourseItems:n}):{}}(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.session?(localStorage.setItem("completedCourseItems",JSON.stringify(t.completedCourseItems)),localStorage.setItem("assignedCourseItems",JSON.stringify(t.assignedCourseItems)),Me({},e,Object(ke.a)({},t.session.userId,{completedCourseItems:t.completedCourseItems,assignedCourseItems:t.assignedCourseItems}))):e;case re:var n=[].concat(Object(Ue.a)(e[t.userId].completedCourseItems),[t.completedCourseItem]);return localStorage.setItem("completedCourseItems",JSON.stringify(n)),Me({},e,Object(ke.a)({},t.userId,Me({},e[t.userId],{completedCourseItems:n})));case te:var r={};for(var s in t.users)r[t.users[s]._id]=Me({},t.users[s]);return r;case oe:return Me({},e,Object(ke.a)({},t.userId,Me({},e[t.userId],{assignedCourseItems:[].concat(Object(Ue.a)(e[t.userId].assignedCourseItems),[t.assignedCourseItem])})));default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var e=localStorage.getItem("userId");return e?[e]:[]}(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return[].concat(Object(Ue.a)(e),[t.session.userId]);case te:return Object(Ue.a)(t.users.map((function(e){return e._id})));default:return e}}}),ze=Object(f.b)((function(e,t){return{sessionRole:e.session.role,users:e.entities.users.allIds.filter((function(t){return t!==e.session.userId})).map((function(t){return e.entities.users.byId[t]})),courseItems:t.courseItems,search:e.ui.search,currentUser:e.entities.users.byId[e.session.userId],courses:e.entities.courses}}),(function(e){return{setSearchSubmit:function(t){return e(w(t))},fetchAssignCourseItemSubmit:function(t,n){return e(me(t,n))},fetchChangeUserRoleSubmit:function(t,n){return e(de(t,n))}}}))((function(e){var t=e.sessionRole,n=e.users,r=e.courseItems,o=e.search,c=e.currentUser,a=e.courses,i=e.setSearchSubmit,u=e.fetchAssignCourseItemSubmit,l=e.fetchChangeUserRoleSubmit;return s.a.createElement("div",{className:"WorkShop"},"teacher"===t&&s.a.createElement("ul",{className:"usersList"},n.map((function(e){return s.a.createElement("li",{key:"".concat(e._id)},s.a.createElement("h5",{className:"userEmail"},s.a.createElement("b",null," ",e.email," ")," \xa0",s.a.createElement("select",{value:e.role,onChange:function(t){return l(e._id,t.target.value)}},s.a.createElement("option",null,"teacher"),s.a.createElement("option",null,"student"))),s.a.createElement("section",{className:"usersCourseItemsList"},s.a.createElement("span",null,"TaskList (Completed): "),e.completedCourseItems.filter((function(e){return qe(r,"lesson").includes(e.courseItemId)})).sort((function(e,t){return e.completedAt-t.completedAt})).map((function(t,n){return s.a.createElement(h.b,{to:"/courses/".concat(r.find((function(e){return e.id===t.courseItemId}))?r.find((function(e){return e.id===t.courseItemId})).courseId:"","/").concat(t.courseItemId),key:t.courseItemId},s.a.createElement("span",{className:"courseItemsListItem"},xe(r,t.courseItemId),n>=e.completedCourseItems.filter((function(e){return qe(r,"quiz").includes(e.courseItemId)})).length-1?null:","))})),s.a.createElement("hr",null),s.a.createElement("span",null,"TaskList (Assigned): "),e.assignedCourseItems.filter((function(e){return qe(r,"lesson").includes(e.courseItemId)})).sort((function(e,t){return e.assignedAt-t.assignedAt})).map((function(t,n){return s.a.createElement(h.b,{to:"/courses/".concat(r.find((function(e){return e.id===t.courseItemId}))?r.find((function(e){return e.id===t.courseItemId})).courseId:"","/").concat(t.courseItemId),key:t.courseItemId},s.a.createElement("span",{className:"courseItemsListItem"},xe(r,t.courseItemId),n>=e.assignedCourseItems.filter((function(e){return qe(r,"lesson").includes(e.courseItemId)})).length-1?null:","))}))),s.a.createElement("form",null,s.a.createElement("input",{name:"courseItemSearch",onBlur:function(e){i(""),e.target.value=""},onChange:function(e){return i(e.target.value)},placeholder:"Add to TaskList..."}),s.a.createElement("ul",{className:"courseItemSearchResults"},r.filter((function(t){return t.title.substring(0,o.length)===o&&!e.assignedCourseItems.find((function(e){return e.courseItemId===t.id}))&&"lesson"===t.type})).slice(0,4).map((function(t){return s.a.createElement("li",{onMouseDown:function(){return u(t.id,e._id)},key:t.id},t.title)})))))}))),"student"===t&&s.a.createElement("ul",{style:{listStyle:"none"}},s.a.createElement("h3",null,"TaskList"),c.assignedCourseItems.filter((function(e){return qe(r,"lesson").includes(e.courseItemId)})).sort((function(e,t){return e.assignedAt-t.assignedAt})).map((function(e,t){return s.a.createElement("li",{className:"card margin5px",key:e.courseItemId},s.a.createElement("h4",null," Project: \xa0",s.a.createElement(h.b,{to:"/courses/".concat(a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId]?a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId]._id:"")},a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId].name)),"Assignment:",s.a.createElement(h.b,{to:"/courses/".concat(r.find((function(t){return t.id===e.courseItemId}))?r.find((function(t){return t.id===e.courseItemId})).courseId:"","/").concat(e.courseItemId)},s.a.createElement("span",{className:"courseItemsListItem"},xe(r,e.courseItemId))))}))))})),Qe=Object(f.b)((function(e,t){return{sessionRole:e.session.role,users:e.entities.users.allIds.map((function(t){return e.entities.users.byId[t]})),courseItems:t.courseItems,search:e.ui.search,currentUser:e.entities.users.byId[e.session.userId],courses:e.entities.courses}}),(function(e){return{setSearchSubmit:function(t){return e(w(t))},fetchAssignCourseItemSubmit:function(t,n){return e(me(t,n))}}}))((function(e){var t=e.sessionRole,n=e.users,r=e.courseItems,o=e.search,c=e.currentUser,a=e.courses,i=e.setSearchSubmit,u=e.fetchAssignCourseItemSubmit;return s.a.createElement("div",{className:"TestBench"},"teacher"===t&&s.a.createElement("ul",{className:"usersList"},n.map((function(e){return s.a.createElement("li",{key:"".concat(e._id)},s.a.createElement("h5",{className:"userEmail"},s.a.createElement("b",null," ",e.email)),s.a.createElement("section",{className:"usersCourseItemsList"},s.a.createElement("span",null,"TestList (Completed): "),e.completedCourseItems.filter((function(e){return qe(r,"quiz").includes(e.courseItemId)})).sort((function(e,t){return e.completedAt-t.completedAt})).map((function(t,n){return s.a.createElement(h.b,{to:"/courses/".concat(r.find((function(e){return e.id===t.courseItemId}))?r.find((function(e){return e.id===t.courseItemId})).courseId:"","/").concat(t.courseItemId),key:t.courseItemId},s.a.createElement("span",{className:"courseItemsListItem"},xe(r,t.courseItemId),s.a.createElement("span",{style:{color:Fe(t.grade)}}," ",100*t.grade,"%"),n>=e.completedCourseItems.filter((function(e){return qe(r,"quiz").includes(e.courseItemId)})).length-1?null:","))})),s.a.createElement("hr",null),s.a.createElement("span",null,"TestList (Assigned): "),e.assignedCourseItems.filter((function(e){return qe(r,"quiz").includes(e.courseItemId)})).sort((function(e,t){return e.assignedAt-t.assignedAt})).map((function(t,n){return s.a.createElement(h.b,{to:"/courses/".concat(r.find((function(e){return e.id===t.courseItemId}))?r.find((function(e){return e.id===t.courseItemId})).courseId:"","/").concat(t.courseItemId),key:t.courseItemId},s.a.createElement("span",{className:"courseItemsListItem"},xe(r,t.courseItemId),n>=e.assignedCourseItems.filter((function(e){return qe(r,"quiz").includes(e.courseItemId)})).length-1?null:","))}))),s.a.createElement("form",null,s.a.createElement("input",{name:"courseItemSearch",onBlur:function(e){i(""),e.target.value=""},onChange:function(e){return i(e.target.value)},placeholder:"Add to TestList..."}),s.a.createElement("ul",{className:"courseItemSearchResults"},r.filter((function(t){return t.title.substring(0,o.length)===o&&!e.assignedCourseItems.find((function(e){return e.courseItemId===t.id}))&&"quiz"===t.type})).slice(0,4).map((function(t){return s.a.createElement("li",{onMouseDown:function(){return u(t.id,e._id)},key:t.id},t.title)})))))}))),"student"===t&&s.a.createElement("section",{className:"studentTestBench"},s.a.createElement("ul",{style:{listStyle:"none"}}," ",s.a.createElement("h3",null,"TestList"),c.assignedCourseItems.filter((function(e){return qe(r,"quiz").includes(e.courseItemId)})).sort((function(e,t){return e.assignedAt-t.assignedAt})).map((function(e,t){return s.a.createElement("li",{className:"card margin5px",key:e.courseItemId},s.a.createElement("h4",null," Project: \xa0",s.a.createElement(h.b,{to:"/courses/".concat(a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId]?a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId]._id:"")},a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId].name)),"Assignment:",s.a.createElement(h.b,{to:"/courses/".concat(r.find((function(t){return t.id===e.courseItemId}))?r.find((function(t){return t.id===e.courseItemId})).courseId:"","/").concat(e.courseItemId)},s.a.createElement("span",{className:"courseItemsListItem"},xe(r,e.courseItemId))))}))),s.a.createElement("ul",{style:{listStyle:"none"}}," ",s.a.createElement("h3",null,"Completed Quizzes"),c.completedCourseItems.filter((function(e){return qe(r,"quiz").includes(e.courseItemId)})).sort((function(e,t){return e.completedAt-t.completedAt})).map((function(e,t){return s.a.createElement("li",{className:"card margin5px",key:e.courseItemId},s.a.createElement("h4",null," Project: \xa0",s.a.createElement(h.b,{to:"/courses/".concat(a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId]?a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId]._id:"")},a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId].name)),"Assignment:",s.a.createElement(h.b,{to:"/courses/".concat(r.find((function(t){return t.id===e.courseItemId}))?r.find((function(t){return t.id===e.courseItemId})).courseId:"","/").concat(e.courseItemId)},s.a.createElement("span",{className:"courseItemsListItem"},xe(r,e.courseItemId))),s.a.createElement("h6",null,"Grade: ",s.a.createElement("span",{style:{color:Fe(e.grade)}},100*e.grade,"%")))}))),s.a.createElement("ul",{style:{listStyle:"none"}}," ",s.a.createElement("h3",null,"Completed Tasks"),c.completedCourseItems.filter((function(e){return qe(r,"lesson").includes(e.courseItemId)})).sort((function(e,t){return e.completedAt-t.completedAt})).map((function(e,t){return s.a.createElement("li",{className:"card margin5px",key:e.courseItemId},s.a.createElement("h4",null," Project: \xa0",s.a.createElement(h.b,{to:"/courses/".concat(a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId]?a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId]._id:"")},a.byId[r.find((function(t){return t.id===e.courseItemId})).courseId].name)),"Assignment:",s.a.createElement(h.b,{to:"/courses/".concat(r.find((function(t){return t.id===e.courseItemId}))?r.find((function(t){return t.id===e.courseItemId})).courseId:"","/").concat(e.courseItemId)},s.a.createElement("span",{className:"courseItemsListItem"},xe(r,e.courseItemId))))})))))})),Ve=Object(f.b)((function(e,t){return{children:t.children}}))((function(e){var t=e.children;return s.a.createElement("div",{className:"WorkBench"},s.a.createElement("h2",null,"Projects"),t)})),Je=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).completeCourseItemSubmit=n.completeCourseItemSubmit.bind(Object(p.a)(n)),n}return Object(I.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){"/login"===this.props.history.location.pathname&&(this.props.history.push("/"),"teacher"===this.props.session.role&&this.props.dispatch(ue()))}},{key:"componentDidMount",value:function(){"teacher"===this.props.session.role&&"/"===this.props.match.url&&this.props.dispatch(ue())}},{key:"completeCourseItemSubmit",value:function(e){var t,n,r;"student"!==this.props.session.role||(t=this.props.users,n=e.id,r=this.props.session.userId,t.byId[r].completedCourseItems.find((function(e){return e.courseItemId===n})))||"quiz"===e.type||this.props.dispatch(le(e.id))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(Te,null),s.a.createElement(Se,{courseName:this.props.params,courseId:this.props.match.params.courseId},s.a.createElement("ul",{style:{listStyle:"none",textAlign:"left",paddingLeft:"25px"}},s.a.createElement("h4",null," ",this.props.courses.find((function(t){return t._id===e.props.match.params.courseId}))?this.props.courses.find((function(t){return t._id===e.props.match.params.courseId})).name:""),(!this.props.match.params.courseId||""===this.props.match.params.courseId)&&this.props.courses.map((function(e,t){return s.a.createElement("li",{key:t}," ",s.a.createElement(h.c,{to:"/courses/".concat(e._id)},e.name)," ")})),this.props.match.params.courseId&&""!==this.props.match.params.courseId&&this.props.courseItems.map((function(t,n){return s.a.createElement("li",{key:t.id,onClick:function(){return e.completeCourseItemSubmit(t)}},s.a.createElement(h.c,{style:t.id===e.props.match.params.courseItemId?{color:"red"}:{},to:"/courses/".concat(e.props.match.params.courseId,"/").concat(t.id)},s.a.createElement("span",{style:t.parentCourseItemId?{marginLeft:"15px"}:{}}," ",t.title," ")))})))),s.a.createElement("header",null,s.a.createElement("span",{className:"sessionStatus"},this.props.session.sessionId?"Logged in with role '".concat(this.props.session.role,"'"):"Logged Out"),this.props.session.sessionId&&s.a.createElement("button",{className:"logoutButton",onClick:function(){return e.props.session.sessionId?e.props.dispatch(P(e.props.session.sessionId,e.props.session.userId)):alert("You are already logged out")}},"Logout")),s.a.createElement("main",{className:"main"},"WorkShop"===this.props.architectureLevel&&!this.props.match.params.courseId&&s.a.createElement(ze,{courseItems:this.props.courseItems}),"TestBench"===this.props.architectureLevel&&!this.props.match.params.courseId&&s.a.createElement(Qe,{courseItems:this.props.courseItems}),"WorkBench"===this.props.architectureLevel&&!this.props.match.params.courseId&&s.a.createElement(Ve,null,s.a.createElement("ul",{style:{listStyle:"none"}},(!this.props.match.params.courseId||""===this.props.match.params.courseId)&&this.props.courses.map((function(t,n){return s.a.createElement("li",{className:"card margin5px",key:n},s.a.createElement(h.c,{to:"/courses/".concat(t._id)},t.name),s.a.createElement("br",null),e.props.allCourseItems.filter((function(e){return e.courseId===t._id})).map((function(e){return s.a.createElement("span",{key:e.id},e.title)})))})))),this.props.match.path.includes("/courses")&&this.props.location.pathname.match(new RegExp("/","g")).length<3&&s.a.createElement(Ae,{courseId:this.props.match.params.courseId},s.a.createElement("ul",{style:{listStyle:"none"}},this.props.match.params.courseId&&""!==this.props.match.params.courseId&&this.props.courseItems.map((function(t,n){return s.a.createElement("li",{key:t.id,onClick:function(){return e.completeCourseItemSubmit(t)}},s.a.createElement(h.c,{style:t.id===e.props.match.params.courseItemId?{color:"red"}:{},to:"/courses/".concat(e.props.match.params.courseId,"/").concat(t.id)},s.a.createElement("span",{style:t.parentCourseItemId?{marginLeft:"15px"}:{}}," ",t.title," ")))})))),"test"===this.props.match.params.currentComponent&&s.a.createElement(ye,null),(!this.props.session.sessionId||"login"===this.props.match.params.currentComponent)&&s.a.createElement(ve,null),"login"===this.props.match.params.currentComponent&&s.a.createElement("section",{className:"temporaryWrapper"},s.a.createElement("h3",null,"Signup Form - Testing Only (ufl.edu emails will be used in future)"),s.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=t.target.email.value.trim(),r=t.target.password.value.trim();n&&r?(e.props.dispatch(k(n,r)),t.target.email.value="",t.target.password.value=""):alert("A valid email & password are required")}},s.a.createElement("input",{name:"email",type:"text"}),s.a.createElement("input",{name:"password",type:"password"}),s.a.createElement("button",{type:"submit"},"Sign Up")))))}}]),t}(s.a.Component),He=Object(f.b)((function(e,t){var n=e.entities.courseItems.allIds.map((function(t){return e.entities.courseItems.byId[t]})).filter((function(e){return e.courseId===t.match.params.courseId})),r=[],s=[];for(var o in n)n[o].parentCourseItemId?r.push(n[o]):s.push(n[o]);"/"===t.match.url&&(s=e.entities.courseItems.allIds.map((function(t){return e.entities.courseItems.byId[t]})));var c=-1;for(var a in r)(c=s.map((function(e){return e.id})).indexOf(r[a].parentCourseItemId))>-1&&s.splice(c+1,0,r[a]);return{session:e.session,courses:e.entities.courses.allIds.map((function(t){return e.entities.courses.byId[t]})),courseItems:s,users:e.entities.users,architectureLevel:e.ui.architectureLevel,allCourseItems:e.entities.courseItems.allIds.map((function(t){return e.entities.courseItems.byId[t]}))}}))(Je),Ge=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={isEditing:!1,isAddingSubCourseItem:!1,answers:[],numWrongAnswerAttempts:0},n}return Object(I.a)(t,e),Object(l.a)(t,[{key:"isAnswerCorrect",value:function(e){return this.state.answers[e]===this.props.courseItem.problems[e].correctOptionIndex?s.a.createElement("i",{className:"material-icons problemIcon green"},"check"):this.state.answers[e]||0===this.state.answers[e]?s.a.createElement("i",{className:"material-icons problemIcon red"},"clear"):s.a.createElement("i",{className:"material-icons problemIcon"},"help_outline")}},{key:"fetchCompleteQuizIfComplete",value:function(){for(var e in this.props.courseItem.problems)if(this.state.answers[e]!==this.props.courseItem.problems[e].correctOptionIndex)return!1;var t,n;t=this.props.completedCourseItems,n=this.props.courseItem.id,t.find((function(e){return e.courseItemId===n}))||this.props.fetchCompleteQuiz(this.props.courseItem.id,1-this.state.numWrongAnswerAttempts/this.props.courseItem.problems.length)}},{key:"componentDidMount",value:function(){"WorkBench"!==this.props.architectureLevel&&this.props.setArchitectureLevel("WorkBench")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"CourseItem",style:{paddingLeft:"315px",position:"absolute",left:"0px",top:"100px"}},"teacher"===this.props.sessionRole&&s.a.createElement("section",{className:"courseItemEditingArea"},!this.state.isAddingSubCourseItem&&s.a.createElement("button",{onClick:function(){return e.setState((function(e){return{isEditing:!e.isEditing}}))}}," ",this.state.isEditing?"Stop Editing":"Edit"),!this.state.isEditing&&!this.props.courseItem.parentCourseItemId&&s.a.createElement("button",{onClick:function(){return e.setState((function(e){return{isAddingSubCourseItem:!e.isAddingSubCourseItem}}))}}," ",this.state.isAddingSubCourseItem?"Stop Adding Sub Course Item":"Add Sub Course Item"),this.state.isEditing&&!this.state.isAddingSubCourseItem&&s.a.createElement(Oe,{fetchEditCourseItemClick:this.props.fetchEditCourseItemClick,editingContent:this.props.courseItem.content,type:this.props.courseItem.type}),this.state.isAddingSubCourseItem&&!this.state.isEditing&&!this.props.courseItem.parentCourseItemId&&s.a.createElement(Oe,{isAddingSubCourseItem:!0,fetchAddSubCourseItemClick:this.props.fetchAddSubCourseItemClick,type:this.props.courseItem.type})),s.a.createElement("h2",null,this.props.courseItem.title),s.a.createElement("hr",null),s.a.createElement("section",{style:{padding:"15px"},className:"courseItemContent",dangerouslySetInnerHTML:{__html:this.props.courseItem.content}}),"quiz"===this.props.courseItem.type&&s.a.createElement("ul",{style:{listStyle:"none"}},this.props.courseItem.problems.map((function(t){return s.a.createElement("li",{key:t.id,className:"problem"},s.a.createElement("h4",null," ",e.isAnswerCorrect(parseInt(t.id,10))," ",parseInt(t.id,10)+1,". ",t.question),t.options.map((function(n,r){return s.a.createElement("button",{key:r,onClick:function(){var n=Object(Ue.a)(e.state.answers),s=0;void 0===n[parseInt(t.id,10)]&&t.correctOptionIndex!==r&&(s=1),n[parseInt(t.id,10)]=r,e.setState((function(e){return{answers:n,numWrongAnswerAttempts:e.numWrongAnswerAttempts+s}}),e.fetchCompleteQuizIfComplete)}},n)})))}))))}}]),t}(s.a.Component);Ge.defaultProps={courseItem:{parentCourseItemId:!1}};var Ke=Object(f.b)((function(e,t){return{sessionRole:e.session.role,courseItem:e.entities.courseItems.byId[t.match.params.courseItemId],location:t.location,completedCourseItems:e.entities.users.byId[e.session.userId].completedCourseItems||[],architectureLevel:e.ui.architectureLevel}}),(function(e,t){return{fetchEditCourseItemClick:function(n,r){return e(Z(t.match.params.courseId,t.match.params.courseItemId,n,r))},fetchAddSubCourseItemClick:function(n,r,s){return e(function(e,t,n,r,s){return function(o,c){var a=c().session,i="sessionId=".concat(a.sessionId,"; userId=").concat(a.userId,";");o(G),fetch("".concat(E,"/courses/").concat(e,"/").concat(t),{method:"POST",headers:{"Content-Type":"application/json",Session:i},body:JSON.stringify({type:n,title:r,content:s})}).then((function(e){return e.json()})).then((function(e){o(K),o(X())})).catch((function(e){return alert("Error: Could add sub course item to course item with id '".concat(t,"'. Are you logged in with a 'teacher' user?"))}))}}(t.match.params.courseId,t.match.params.courseItemId,n,r,s))},fetchCompleteQuiz:function(t,n){return e(le(t,n))},setArchitectureLevel:function(t){return e(O(t))}}}))(Ge);var Xe=Object(Ne.c)({isFetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case g:return!0;case b:return!1;default:return e}},byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{offlineId0:{message:"Default offline test message 1"},offlineId1:{message:"Default offline test message 2"}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var n={};for(var r in t.tests)n[t.tests[r].createdAt]={message:t.tests[r].message};return n;default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["offlineId0","offlineId1"],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return[t.tests.map((function(e){return e.createdAt}))];default:return e}}}),Ye=n(32);function $e(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(n,!0).forEach((function(t){Object(ke.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=Object(Ne.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return et({},e,Object(ke.a)({},t.problem.id,et({},t.problem)));case Ie:var n=t.problemId;e[n];return Object(Ye.a)(e,[n].map($e));case fe:return et({},e,Object(ke.a)({},t.problemId,et({},e[t.problemId],{question:t.question})));case he:return et({},e,Object(ke.a)({},t.problemId,et({},e[t.problemId],{options:[].concat(Object(Ue.a)(e[t.problemId].options),[t.option])})));case Ee:return e;case be:return et({},e,Object(ke.a)({},t.problemId,et({},e[t.problemId],{correctOptionIndex:t.correctOptionIndex})));case ge:default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return[].concat(Object(Ue.a)(e),[t.problem.id]);case Ie:return e.filter((function(e){return e!==t.problemId}));default:return e}}});function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(n,!0).forEach((function(t){Object(ke.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var st=Object(Ne.c)({courses:De,courseItems:Pe,problems:tt,tests:Xe,users:We});var ot=Object(Ne.c)({entities:st,session:function(e,t){switch(t.type){case j:return rt({isFetching:!0},e);case A:return localStorage.setItem("userId",t.session.userId),localStorage.setItem("sessionId",t.session.sessionId),localStorage.setItem("expiresAt",t.session.expiresAt),localStorage.setItem("role",t.session.role),window.location.reload(),{isFetching:!1,userId:t.session.userId,sessionId:t.session.sessionId,expiresAt:t.session.expiresAt,role:t.session.role};case N:return rt({isFetching:!0},e);case _:return localStorage.setItem("userId",t.session.userId),localStorage.setItem("sessionId",t.session.sessionId),localStorage.setItem("expiresAt",t.session.expiresAt),localStorage.setItem("role",t.session.role),window.location.reload(),{isFetching:!1,userId:t.session.userId,sessionId:t.session.sessionId,expiresAt:t.session.expiresAt,role:t.session.role};case L:return{isFetching:!0};case x:return localStorage.removeItem("userId"),localStorage.removeItem("sessionId"),localStorage.removeItem("expiresAt"),localStorage.removeItem("role"),window.location.reload(),{isFetching:!1};case D:return console.log("'session reducer's case REFRESH_SESSION tba"),e;default:return parseInt(localStorage.getItem("expiresAt"),10)>Date.now()?{isFetching:!1,userId:localStorage.getItem("userId"),sessionId:localStorage.getItem("sessionId"),expiresAt:parseInt(localStorage.getItem("expiresAt"),10),role:localStorage.getItem("role")}:{isFetching:!1}}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{architectureLevel:"WorkShop",search:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return rt({},e,{architectureLevel:t.architectureLevel});case S:return rt({},e,{search:t.search});default:return e}}}),ct=n(31),at=n(18),it=(n(54),Object(Ne.d)(ot,Object(Ne.a)(ct.a)));c.a.render(s.a.createElement(f.a,{store:it},s.a.createElement(h.a,null,s.a.createElement("div",{className:"BrowserRouterWrapper"},(!it.getState().session.expiresAt||!it.getState().session.expiresAt>Date.now())&&s.a.createElement(at.a,{to:"/login"}),s.a.createElement(at.b,{component:ve,path:"/login"}),s.a.createElement(at.b,{component:it.getState().session.expiresAt&&it.getState().session.expiresAt>Date.now()?He:null,exact:!0,path:"/:currentComponent?"}),s.a.createElement(at.b,{component:He,exact:!0,path:"/courses/:courseId"}),s.a.createElement(at.b,{component:He,path:"/courses/:courseId/:courseItemId"}),s.a.createElement(at.b,{component:Ke,path:"/courses/:courseId/:courseItemId"})))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");a?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):i(e)}))}}()}},[[33,1,2]]]);
//# sourceMappingURL=main.a094e8de.chunk.js.map